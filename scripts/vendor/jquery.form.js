/*!
 * jQuery Form Plugin
 * version: 3.18 (28-SEP-2012)
 * @requires jQuery v1.5 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses:
 *    http://malsup.github.com/mit-license.txt
 *    http://malsup.github.com/gpl-license-v2.txt
 */
;(function(c){"use strict";var I={};I.fileapi=c("<input type='file'/>").get(0).files!==undefined;I.formdata=window.FormData!==undefined;c.fn.ajaxSubmit=function(j){if(!this.length){r('ajaxSubmit: skipping submit process - no element selected');return this}var E,S,B,u=this;if(typeof j=='function'){j={success:j}}E=this.attr('method');S=this.attr('action');B=(typeof S==='string')?c.trim(S):'';B=B||window.location.href||'';if(B){B=(B.match(/^([^#]+)/)||[])[1]}j=c.extend(true,{url:B,success:c.ajaxSettings.success,type:E||'GET',iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank'},j);var O={};this.trigger('form-pre-serialize',[this,j,O]);if(O.veto){r('ajaxSubmit: submit vetoed via form-pre-serialize trigger');return this}if(j.beforeSerialize&&j.beforeSerialize(this,j)===false){r('ajaxSubmit: submit aborted via beforeSerialize callback');return this}var P=j.traditional;if(P===undefined){P=c.ajaxSettings.traditional}var J=[];var Q,F=this.formToArray(j.semantic,J);if(j.data){j.extraData=j.data;Q=c.param(j.data,P)}if(j.beforeSubmit&&j.beforeSubmit(F,this,j)===false){r('ajaxSubmit: submit aborted via beforeSubmit callback');return this}this.trigger('form-submit-validate',[F,this,j,O]);if(O.veto){r('ajaxSubmit: submit vetoed via form-submit-validate trigger');return this}var K=c.param(F,P);if(Q){K=(K?(K+'&'+Q):Q)}if(j.type.toUpperCase()=='GET'){j.url+=(j.url.indexOf('?')>=0?'&':'?')+K;j.data=null}else{j.data=K}var G=[];if(j.resetForm){G.push(function(){u.resetForm()})}if(j.clearForm){G.push(function(){u.clearForm(j.includeHidden)})}if(!j.dataType&&j.target){var bk=j.success||function(){};G.push(function(a){var b=j.replaceTarget?'replaceWith':'html';c(j.target)[b](a).each(bk,arguments)})}else if(j.success){G.push(j.success)}j.success=function(a,b,f){var h=j.context||this;for(var k=0,g=G.length;k<g;k++){G[k].apply(h,[a,b,f||u,u])}};var bl=c('input:file:enabled[value]',this);var Z=bl.length>0;var ba='multipart/form-data';var bb=(u.attr('enctype')==ba||u.attr('encoding')==ba);var T=I.fileapi&&I.formdata;r("fileAPI :"+T);var bm=(Z||bb)&&!T;var L;if(j.iframe!==false&&(j.iframe||bm)){if(j.closeKeepAlive){c.get(j.closeKeepAlive,function(){L=bc(F)})}else{L=bc(F)}}else if((Z||bb)&&T){L=bn(F)}else{L=c.ajax(j)}u.removeData('jqxhr').data('jqxhr',L);for(var U=0;U<J.length;U++)J[U]=null;this.trigger('form-submit-notify',[this,j]);return this;function bo(a){var b=c.param(a).split('&');var f=b.length;var h={};var k,g;for(k=0;k<f;k++){g=b[k].split('=');h[decodeURIComponent(g[0])]=decodeURIComponent(g[1])}return h}function bn(g){var n=new FormData();for(var m=0;m<g.length;m++){n.append(g[m].name,g[m].value)}if(j.extraData){var o=bo(j.extraData);for(var l in o)if(o.hasOwnProperty(l))n.append(l,o[l])}j.data=null;var q=c.extend(true,{},c.ajaxSettings,j,{contentType:false,processData:false,cache:false,type:E||'POST'});if(j.uploadProgress){q.xhr=function(){var k=jQuery.ajaxSettings.xhr();if(k.upload){k.upload.onprogress=function(a){var b=0;var f=a.loaded||a.position;var h=a.total;if(a.lengthComputable){b=Math.ceil(f/h*100)}j.uploadProgress(a,f,h,b)}}return k}}q.data=null;var p=q.beforeSend;q.beforeSend=function(a,b){b.data=n;if(p)p.call(this,a,b)};return c.ajax(q)}function bc(x){var t=u[0],C,R,d,z,M,y,v,i,H,A,V,N;var bp=!!c.fn.prop;var w=c.Deferred();if(c(':input[name=submit],:input[id=submit]',t).length){alert('Error: Form elements must not have name or id of "submit".');w.reject();return w}if(x){for(R=0;R<J.length;R++){C=c(J[R]);if(bp)C.prop('disabled',false);else C.removeAttr('disabled')}}d=c.extend(true,{},c.ajaxSettings,j);d.context=d.context||d;M='jqFormIO'+(new Date().getTime());if(d.iframeTarget){y=c(d.iframeTarget);A=y.attr('name');if(!A)y.attr('name',M);else M=A}else{y=c('<iframe name="'+M+'" src="'+d.iframeSrc+'" />');y.css({position:'absolute',top:'-1000px',left:'-1000px'})}v=y[0];i={aborted:0,responseText:null,responseXML:null,status:0,statusText:'n/a',getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var b=(a==='timeout'?'timeout':'aborted');r('aborting upload... '+b);this.aborted=1;if(v.contentWindow.document.execCommand){try{v.contentWindow.document.execCommand('Stop')}catch(ignore){}}y.attr('src',d.iframeSrc);i.error=b;if(d.error)d.error.call(d.context,i,b,a);if(z)c.event.trigger("ajaxError",[i,d,b]);if(d.complete)d.complete.call(d.context,i,b)}};z=d.global;if(z&&0===c.active++){c.event.trigger("ajaxStart")}if(z){c.event.trigger("ajaxSend",[i,d])}if(d.beforeSend&&d.beforeSend.call(d.context,i,d)===false){if(d.global){c.active--}w.reject();return w}if(i.aborted){w.reject();return w}H=t.clk;if(H){A=H.name;if(A&&!H.disabled){d.extraData=d.extraData||{};d.extraData[A]=H.value;if(H.type=="image"){d.extraData[A+'.x']=t.clk_x;d.extraData[A+'.y']=t.clk_y}}}var bd=1;var W=2;function be(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}var bf=c('meta[name=csrf-token]').attr('content');var bg=c('meta[name=csrf-param]').attr('content');if(bg&&bf){d.extraData=d.extraData||{};d.extraData[bg]=bf}function bh(){var b=u.attr('target'),f=u.attr('action');t.setAttribute('target',M);if(!E){t.setAttribute('method','POST')}if(f!=d.url){t.setAttribute('action',d.url)}if(!d.skipEncodingOverride&&(!E||/post/i.test(E))){u.attr({encoding:'multipart/form-data',enctype:'multipart/form-data'})}if(d.timeout){N=setTimeout(function(){V=true;D(bd)},d.timeout)}function h(){try{var a=be(v).readyState;r('state = '+a);if(a&&a.toLowerCase()=='uninitialized')setTimeout(h,50)}catch(e){r('Server abort: ',e,' (',e.name,')');D(W);if(N)clearTimeout(N);N=undefined}}var k=[];try{if(d.extraData){for(var g in d.extraData){if(d.extraData.hasOwnProperty(g)){if(c.isPlainObject(d.extraData[g])&&d.extraData[g].hasOwnProperty('name')&&d.extraData[g].hasOwnProperty('value')){k.push(c('<input type="hidden" name="'+d.extraData[g].name+'">').attr('value',d.extraData[g].value).appendTo(t)[0])}else{k.push(c('<input type="hidden" name="'+g+'">').attr('value',d.extraData[g]).appendTo(t)[0])}}}}if(!d.iframeTarget){y.appendTo('body');if(v.attachEvent)v.attachEvent('onload',D);else v.addEventListener('load',D,false)}setTimeout(h,15);t.submit()}finally{t.setAttribute('action',f);if(b){t.setAttribute('target',b)}else{u.removeAttr('target')}c(k).remove()}}if(d.forceSync){bh()}else{setTimeout(bh,10)}var bi,s,bq=50,bj;function D(f){if(i.aborted||bj){return}try{s=be(v)}catch(ex){r('cannot access response document: ',ex);f=W}if(f===bd&&i){i.abort('timeout');w.reject(i,'timeout');return}else if(f==W&&i){i.abort('server abort');w.reject(i,'error','server abort');return}if(!s||s.location.href==d.iframeSrc){if(!V)return}if(v.detachEvent)v.detachEvent('onload',D);else v.removeEventListener('load',D,false);var h='success',k;try{if(V){throw'timeout';}var g=d.dataType=='xml'||s.XMLDocument||c.isXMLDoc(s);r('isXml='+g);if(!g&&window.opera&&(s.body===null||!s.body.innerHTML)){if(--bq){r('requeing onLoad callback, DOM not available');setTimeout(D,250);return}}var n=s.body?s.body:s.documentElement;i.responseText=n?n.innerHTML:null;i.responseXML=s.XMLDocument?s.XMLDocument:s;if(g)d.dataType='xml';i.getResponseHeader=function(a){var b={'content-type':d.dataType};return b[a]};if(n){i.status=Number(n.getAttribute('status'))||i.status;i.statusText=n.getAttribute('statusText')||i.statusText}var m=(d.dataType||'').toLowerCase();var o=/(json|script|text)/.test(m);if(o||d.textarea){var l=s.getElementsByTagName('textarea')[0];if(l){i.responseText=l.value;i.status=Number(l.getAttribute('status'))||i.status;i.statusText=l.getAttribute('statusText')||i.statusText}else if(o){var q=s.getElementsByTagName('pre')[0];var p=s.getElementsByTagName('body')[0];if(q){i.responseText=q.textContent?q.textContent:q.innerText}else if(p){i.responseText=p.textContent?p.textContent:p.innerText}}}else if(m=='xml'&&!i.responseXML&&i.responseText){i.responseXML=br(i.responseText)}try{bi=bs(i,m,d)}catch(f){h='parsererror';i.error=k=(f||h)}}catch(f){r('error caught: ',f);h='error';i.error=k=(f||h)}if(i.aborted){r('upload aborted');h=null}if(i.status){h=(i.status>=200&&i.status<300||i.status===304)?'success':'error'}if(h==='success'){if(d.success)d.success.call(d.context,bi,'success',i);w.resolve(i.responseText,'success',i);if(z)c.event.trigger("ajaxSuccess",[i,d])}else if(h){if(k===undefined)k=i.statusText;if(d.error)d.error.call(d.context,i,h,k);w.reject(i,'error',k);if(z)c.event.trigger("ajaxError",[i,d,k])}if(z)c.event.trigger("ajaxComplete",[i,d]);if(z&&!--c.active){c.event.trigger("ajaxStop")}if(d.complete)d.complete.call(d.context,i,h);bj=true;if(d.timeout)clearTimeout(N);setTimeout(function(){if(!d.iframeTarget)y.remove();i.responseXML=null},100)}var br=c.parseXML||function(a,b){if(window.ActiveXObject){b=new ActiveXObject('Microsoft.XMLDOM');b.async='false';b.loadXML(a)}else{b=(new DOMParser()).parseFromString(a,'text/xml')}return(b&&b.documentElement&&b.documentElement.nodeName!='parsererror')?b:null};var bt=c.parseJSON||function(a){return window['eval']('('+a+')')};var bs=function(a,b,f){var h=a.getResponseHeader('content-type')||'',k=b==='xml'||!b&&h.indexOf('xml')>=0,g=k?a.responseXML:a.responseText;if(k&&g.documentElement.nodeName==='parsererror'){if(c.error)c.error('parsererror')}if(f&&f.dataFilter){g=f.dataFilter(g,b)}if(typeof g==='string'){if(b==='json'||!b&&h.indexOf('json')>=0){g=bt(g)}else if(b==="script"||!b&&h.indexOf("javascript")>=0){c.globalEval(g)}}return g};return w}};c.fn.ajaxForm=function(a){a=a||{};a.delegation=a.delegation&&c.isFunction(c.fn.on);if(!a.delegation&&this.length===0){var b={s:this.selector,c:this.context};if(!c.isReady&&b.s){r('DOM not ready, queuing ajaxForm');c(function(){c(b.s,b.c).ajaxForm(a)});return this}r('terminating; zero elements found by selector'+(c.isReady?'':' (DOM not ready)'));return this}if(a.delegation){c(document).off('submit.form-plugin',this.selector,X).off('click.form-plugin',this.selector,Y).on('submit.form-plugin',this.selector,a,X).on('click.form-plugin',this.selector,a,Y);return this}return this.ajaxFormUnbind().bind('submit.form-plugin',a,X).bind('click.form-plugin',a,Y)};function X(a){var b=a.data;if(!a.isDefaultPrevented()){a.preventDefault();c(this).ajaxSubmit(b)}}function Y(a){var b=a.target;var f=c(b);if(!(f.is(":submit,input:image"))){var h=f.closest(':submit');if(h.length===0){return}b=h[0]}var k=this;k.clk=b;if(b.type=='image'){if(a.offsetX!==undefined){k.clk_x=a.offsetX;k.clk_y=a.offsetY}else if(typeof c.fn.offset=='function'){var g=f.offset();k.clk_x=a.pageX-g.left;k.clk_y=a.pageY-g.top}else{k.clk_x=a.pageX-b.offsetLeft;k.clk_y=a.pageY-b.offsetTop}}setTimeout(function(){k.clk=k.clk_x=k.clk_y=null},100)}c.fn.ajaxFormUnbind=function(){return this.unbind('submit.form-plugin click.form-plugin')};c.fn.formToArray=function(a,b){var f=[];if(this.length===0){return f}var h=this[0];var k=a?h.getElementsByTagName('*'):h.elements;if(!k){return f}var g,n,m,o,l,q,p;for(g=0,q=k.length;g<q;g++){l=k[g];m=l.name;if(!m){continue}if(a&&h.clk&&l.type=="image"){if(!l.disabled&&h.clk==l){f.push({name:m,value:c(l).val(),type:l.type});f.push({name:m+'.x',value:h.clk_x},{name:m+'.y',value:h.clk_y})}continue}o=c.fieldValue(l,true);if(o&&o.constructor==Array){if(b)b.push(l);for(n=0,p=o.length;n<p;n++){f.push({name:m,value:o[n]})}}else if(I.fileapi&&l.type=='file'&&!l.disabled){if(b)b.push(l);var x=l.files;if(x.length){for(n=0;n<x.length;n++){f.push({name:m,value:x[n],type:l.type})}}else{f.push({name:m,value:'',type:l.type})}}else if(o!==null&&typeof o!='undefined'){if(b)b.push(l);f.push({name:m,value:o,type:l.type,required:l.required})}}if(!a&&h.clk){var t=c(h.clk),C=t[0];m=C.name;if(m&&!C.disabled&&C.type=='image'){f.push({name:m,value:t.val()});f.push({name:m+'.x',value:h.clk_x},{name:m+'.y',value:h.clk_y})}}return f};c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(k){var g=[];this.each(function(){var a=this.name;if(!a){return}var b=c.fieldValue(this,k);if(b&&b.constructor==Array){for(var f=0,h=b.length;f<h;f++){g.push({name:a,value:b[f]})}}else if(b!==null&&typeof b!='undefined'){g.push({name:this.name,value:b})}});return c.param(g)};c.fn.fieldValue=function(a){for(var b=[],f=0,h=this.length;f<h;f++){var k=this[f];var g=c.fieldValue(k,a);if(g===null||typeof g=='undefined'||(g.constructor==Array&&!g.length)){continue}if(g.constructor==Array)c.merge(b,g);else b.push(g)}return b};c.fieldValue=function(a,b){var f=a.name,h=a.type,k=a.tagName.toLowerCase();if(b===undefined){b=true}if(b&&(!f||a.disabled||h=='reset'||h=='button'||(h=='checkbox'||h=='radio')&&!a.checked||(h=='submit'||h=='image')&&a.form&&a.form.clk!=a||k=='select'&&a.selectedIndex==-1)){return null}if(k=='select'){var g=a.selectedIndex;if(g<0){return null}var n=[],m=a.options;var o=(h=='select-one');var l=(o?g+1:m.length);for(var q=(o?g:0);q<l;q++){var p=m[q];if(p.selected){var x=p.value;if(!x){x=(p.attributes&&p.attributes['value']&&!(p.attributes['value'].specified))?p.text:p.value}if(o){return x}n.push(x)}}return n}return c(a).val()};c.fn.clearForm=function(a){return this.each(function(){c('input,select,textarea',this).clearFields(a)})};c.fn.clearFields=c.fn.clearInputs=function(f){var h=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();if(h.test(a)||b=='textarea'){this.value=''}else if(a=='checkbox'||a=='radio'){this.checked=false}else if(b=='select'){this.selectedIndex=-1}else if(f){if((f===true&&/hidden/.test(a))||(typeof f=='string'&&c(this).is(f)))this.value=''}})};c.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=='function'||(typeof this.reset=='object'&&!this.reset.nodeType)){this.reset()}})};c.fn.enable=function(a){if(a===undefined){a=true}return this.each(function(){this.disabled=!a})};c.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var a=this.type;if(a=='checkbox'||a=='radio'){this.checked=f}else if(this.tagName.toLowerCase()=='option'){var b=c(this).parent('select');if(f&&b[0]&&b[0].type=='select-one'){b.find('option').selected(false)}this.selected=f}})};c.fn.ajaxSubmit.debug=false;function r(){if(!c.fn.ajaxSubmit.debug)return;var a='[jquery.form] '+Array.prototype.join.call(arguments,'');if(window.console&&window.console.log){window.console.log(a)}else if(window.opera&&window.opera.postError){window.opera.postError(a)}}})(jQuery);