var Editor=Editor?Editor:{};Editor.Server={},Editor.Init=function(){Editor.EditorSettings=$(".EditorField"),Editor.EditorSettings.find(".dmenu").delegate("a","click",Editor.ToggleSettingsSection),Editor.EditorSettings.find(".editor_settings_toggler").delegate("input[type=radio]","click",Editor.ToggleEditorSettingsWrapper),Editor.EditorSettings.each(function(e,t){$(t).find(".editor_settings_toggler").find("input:checked").trigger("click")}),Editor.EditorSettings.find(".tbuttons").each(function(e,t){var i=$(t);i.find(".redactor_toolbar").sortable({connectWith:".redactor_toolbar",containment:i,appendTo:"body",helper:function(e){var t="";return jQuery(e.target).hasClass("redactor_separator")===!0?(t=jQuery(e.target).clone().wrap("<p>").parent().html(),$("<ul class='redactor_toolbar' style='width:10px;height:25px;margin:0'>"+t+"</ul>")):(t=jQuery(e.target).parent().clone().wrap("<p>").parent().html(),$("<ul class='redactor_toolbar' style='width:28px;height:25px;margin:0'>"+t+"</ul>"))},stop:function(e,t){jQuery(e.target).hasClass("buttons_avail")===!0?(t.item.find("input").removeAttr("disabled"),t.item.hasClass("redactor_separator")===!0&&jQuery(e.target).append(t.item.clone())):(t.item.find("input").attr("disabled","disabled"),t.item.hasClass("redactor_separator")===!0&&t.item.remove()),i.find(".redactor_toolbar.buttons_current").find("input").removeAttr("disabled"),i.find(".redactor_toolbar.buttons_avail").find("input").attr("disabled","disabled")}}).disableSelection()}),Editor.EditorSettings.find(".upload_service").delegate("input","click",Editor.ToggleUploadService).find("input:checked").trigger("click"),null!==document.getElementById("field_type")&&($("#field_type").change(Editor.FieldtypeSelect),Editor.PreviousFieldtype=$("#field_type").val())},Editor.ToggleSettingsSection=function(e){e.preventDefault(),Editor.EditorSettings.find(".dmenu").find("li").removeClass("current"),$(e.target).parent().addClass("current"),Editor.EditorSettings.find(".tabholder:visible").hide(),Editor.EditorSettings.find(".tabholder."+e.target.getAttribute("data-section")).show()},Editor.ToggleEditorSettingsWrapper=function(e){var t=$(e.target).closest(".EditorField");t.find(".editor_settings_wrapper").hide(),t.find(".editor_settings_"+e.target.value).show()},Editor.ToggleUploadService=function(e){var t=$(e.target).closest("table");t.find(".upload_wrapper").hide(),t.find(".upload_"+e.target.value).show()},Editor.FieldtypeSelect=function(e){$(e.target),-1!=window.location.href.indexOf("field_id=")&&("textarea"==Editor.PreviousFieldtype||"text"==Editor.PreviousFieldtype||"rte"==Editor.PreviousFieldtype)&&Editor.EditorSettings.find(".editor_fieldtype_toggler").show().find("input:first").trigger("click")};